<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formation Manager - Version HTML avec Supabase</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts pour signatures -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Great+Vibes&family=Allura&family=Sacramento&family=Pacifico&display=swap" rel="stylesheet">
    
    <!-- Lucide Icons CDN -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <!-- React CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel pour JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Supabase CDN -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    
    <!-- html2pdf.js CDN -->
    <script async src="https://unpkg.com/html2pdf.js@0.10.1/dist/html2pdf.bundle.min.js"></script>
    
    <!-- jsPDF CDN pour génération PDF locale -->
    <script async src="https://unpkg.com/jspdf@latest/dist/jspdf.umd.min.js"></script>
    
    <!-- PDF.js CDN pour visualisation PDF -->
    <script async src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    
    <!-- PDF-lib CDN pour manipulation PDF avancée -->
    <script async src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>

    <!-- Chart.js CDN pour graphiques -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body class="bg-gray-50">
    <div id="root"></div>

    <!-- Core Configuration -->
    <script src="js/config/supabase.js"></script>
    
    <!-- Utilities (loaded first, no dependencies) -->
    <script src="js/utils/dateUtils.js"></script>
    <script src="js/utils/projectUtils.js"></script>
    <script src="js/utils/sessionUtils.js"></script>
    <script src="js/utils/formationUtils.js"></script>
    <script src="js/utils/sessionFormatUtils.js"></script>
    <script src="js/utils/eventBus.js"></script>
    <!-- PDF Generators (loaded in order: core first, then section mapper, then generators) -->
    <script src="js/utils/pdf/pdfCore.js"></script>
    <script src="js/utils/pdf/pdfSectionMapper.js"></script>
    <script src="js/utils/pdf/pdfProgramme.js"></script>
    <script src="js/utils/pdf/pdfConvocation.js"></script>
    <script src="js/utils/pdf/pdfConvention.js"></script>
    <script src="js/utils/pdf/pdfEmargement.js"></script>
    <script src="js/utils/pdf/pdfQualiopi.js"></script>
    <script src="js/utils/pdf/pdfDiplome.js"></script>
    <script src="js/utils/pdfSigner.js"></script>
    <script src="js/utils/taskWorkflowUtils.js"></script>
    <script src="js/utils/signatureUtils.js"></script>
    
    <!-- Auth Hooks (minimal dependencies) -->
    <script src="js/hooks/auth/useAuth.js"></script>
    <script src="js/hooks/auth/useUserProfile.js"></script>
    <script src="js/hooks/auth/useCurrentUserEntreprise.js"></script>
    <script src="js/hooks/auth/useCurrentUserRole.js"></script>

    <!-- UI Hooks -->
    <script src="js/hooks/ui/useRealtime.js"></script>
    <script src="js/hooks/ui/useTemplates.js"></script>
    <script src="js/hooks/ui/useToaster.js"></script>

    <!-- Core Hooks (generic CRUD utilities) -->
    <script src="js/hooks/core/useSimpleCRUD.js"></script>
    <script src="js/hooks/core/useArkanceUsers.js"></script>
    <script src="js/hooks/core/useUserCompetences.js"></script>
    <script src="js/hooks/core/useLogicielsWithCompetences.js"></script>

    <!-- Entity Hooks (CRUD entities) -->
    <script src="js/hooks/entities/useEntreprises.js"></script>
    <script src="js/hooks/entities/useContacts.js"></script>
    <script src="js/hooks/entities/useServices.js"></script>
    <script src="js/hooks/entities/useMetierPdc.js"></script>
    <script src="js/hooks/entities/useTypePdc.js"></script>
    <script src="js/hooks/entities/useUsers.js"></script>
    <script src="js/hooks/entities/useLogiciels.js"></script>
    <script src="js/hooks/entities/usePdc.js"></script>
    <script src="js/hooks/entities/useAgences.js"></script>

    <!-- Project Hooks -->
    <script src="js/hooks/projects/useProjects.js"></script>
    <script src="js/hooks/projects/useTasks.js"></script>

    <!-- Planning Hooks -->
    <script src="js/hooks/planning/useUserPlanning.js"></script>
    <script src="js/hooks/planning/useAllPlanning.js"></script>

    <!-- Formation Hooks -->
    <script src="js/hooks/formations/useFormation.js"></script>
    <script src="js/hooks/formations/useEvaluation.js"></script>
    <script src="js/hooks/formations/useFormateurs.js"></script>
    <script src="js/hooks/formations/useProjectSessions.js"></script>
    
    <!-- Task Workflow Hooks and Services -->
    <script src="js/hooks/projects/useTaskWorkflow.js"></script>
    <script src="js/services/qualificationService.js"></script>
    <script src="js/services/devisService.js"></script>
    <script src="js/services/planificationService.js"></script>
    <script src="js/services/documentDataService.js"></script>
    <script src="js/services/documentGenerationService.js"></script>
    <script src="js/services/documentSignatureService.js"></script>
    <script src="js/services/addressAutocompleteService.js"></script>
    
    <!-- Task Specialized Components -->
    <script src="js/components/tasks/QualificationTaskSection.js"></script>
    <script src="js/components/tasks/DevisTaskSection.js"></script>
    <script src="js/components/tasks/ValidationDevisTaskSection.js"></script>
    <script src="js/components/tasks/PlanificationTaskSection.js"></script>
    <script src="js/components/tasks/GenerationDocumentsTaskSection.js"></script>
    <script src="js/components/tasks/ValidationDocumentsTaskSection.js"></script>
    
    <!-- Common Components (loaded early for reuse) -->
    <script src="js/components/common/AddressAutocomplete.js"></script>
    <script src="js/components/common/SearchableDropdown.js"></script>
    <script src="js/components/common/TableView.js"></script>
    <script src="js/components/common/GroupedTableView.js"></script>
    <script src="js/components/common/GroupingDropdown.js"></script>
    <script src="js/components/common/SimpleCalendar.js"></script>
    <script src="js/components/common/TimelineView.js"></script>
    <script src="js/components/common/SignaturePad.js"></script>
    <script src="js/components/common/PDFViewer.js"></script>
    <script src="js/components/common/TemplateLayoutEditor.js"></script>
    <script src="js/components/common/VisualLayoutEditor.js"></script>
    <script src="js/components/common/PDFHighlightOverlay.js"></script>
    <script src="js/components/common/StagiairePicker.js"></script>
    <script src="js/components/common/FormationSessionPicker.js"></script>
    <script src="js/components/StarRating.js"></script>
    <script src="js/components/common/SessionBookingWidget.js"></script>
    <script src="js/components/common/RadarChart.js"></script>
    <script src="js/components/common/Sidebar.js"></script>
    <script src="js/components/common/RealtimeStatus.js"></script>
    <script src="js/components/common/DetailPageHeader.js"></script>
    <script src="js/components/common/CollapsibleEntrepriseSection.js"></script>
    <script src="js/components/common/CollapsibleProjectSection.js"></script>
    <script src="js/components/common/CollapsibleTaskSection.js"></script>
    <script src="js/components/common/CollaboratorsSection.js"></script>

    <!-- Generic Page Components (used by multiple pages) -->
    <script src="js/components/pages/SimpleCRUDPage.js"></script>

    <!-- Auth Provider (critical for app initialization) -->
    <script src="js/components/AuthProvider.js"></script>

    <!-- Generic Modal Components (used by multiple modals) -->
    <script defer src="js/components/modals/SimpleFormModal.js"></script>
    <script defer src="js/components/modals/ImageSelectorModal.js"></script>

    <!-- Modals (defer loading, not critical for initial render) -->
    <script defer src="js/components/modals/LoginModal.js"></script>
    <script defer src="js/components/modals/EntrepriseModal.js"></script>
    <script defer src="js/components/modals/ContactModal.js"></script>
    <script defer src="js/components/modals/ServiceModal.js"></script>
    <script defer src="js/components/modals/MetierPdcModal.js"></script>
    <script defer src="js/components/modals/TypePdcModal.js"></script>
    <script defer src="js/components/modals/ProjectModal.js"></script>
    <script defer src="js/components/modals/TaskModal.js"></script>
    <script defer src="js/components/modals/UserModal.js"></script>
    <script defer src="js/components/modals/UserCompetenceModal.js"></script>
    <script defer src="js/components/modals/UserPlanningModal.js"></script>
    <script defer src="js/components/modals/UserSettingsModal.js"></script>
    <script defer src="js/components/modals/PdcModal.js"></script>
    <script defer src="js/components/modals/AddCompetenceModal.js"></script>

    <!-- Pages (defer loading, loaded on demand) -->
    <!-- List Pages -->
    <script defer src="js/components/pages/lists/EntreprisesPage.js"></script>
    <script defer src="js/components/pages/lists/ServicesPage.js"></script>
    <script defer src="js/components/pages/lists/MetierPdcPage.js"></script>
    <script defer src="js/components/pages/lists/TypePdcPage.js"></script>
    <script defer src="js/components/pages/lists/ProjectsPage.js"></script>
    <script defer src="js/components/pages/lists/TasksPage.js"></script>
    <script defer src="js/components/pages/lists/LogicielsPage.js"></script>
    <script defer src="js/components/pages/lists/UsersPage.js"></script>
    <script defer src="js/components/pages/lists/CollaborateursPage.js"></script>
    <script defer src="js/components/pages/lists/PdcPage.js"></script>
    <script defer src="js/components/pages/lists/AgencesPage.js"></script>

    <!-- Detail Pages -->
    <script defer src="js/components/pages/details/EntrepriseDetailPage.js"></script>
    <script defer src="js/components/pages/details/ProjectDetailPage.js"></script>
    <script defer src="js/components/pages/details/TaskDetailPage.js"></script>
    <script defer src="js/components/pages/details/LogicielDetailPage.js"></script>
    <script defer src="js/components/pages/details/UserDetailPage.js"></script>
    <script defer src="js/components/pages/details/PdcDetailPage.js"></script>

    <!-- Formation Pages -->
    <script defer src="js/components/pages/formation/FormationPrepPage.js"></script>
    <script defer src="js/components/pages/formation/EvaluationFormPage.js"></script>
    <script defer src="js/components/pages/formation/EvaluationFormPreview.js"></script>
    <script defer src="js/components/pages/formation/EvaluationListPage.js"></script>

    <!-- Special Pages -->
    <script defer src="js/components/pages/PlanningPage.js"></script>
    <script defer src="js/components/pages/TemplateBuilderPage.js"></script>
    <script defer src="js/components/pages/AppointmentBookingPage.js"></script>

    <!-- Layout and App (loaded last) -->
    <script src="js/components/Layout.js"></script>
    <script src="js/app.js"></script>

    <script type="text/babel">
        // Initialisation de l'application après le chargement de tous les modules
        window.addEventListener('load', function() {
            // Attendre que tous les modules soient chargés
            setTimeout(() => {
                if (window.initializeApp) {
                    window.initializeApp();
                } else {
                    console.error('Application non initialisée');
                }
            }, 100);
        });
    </script>
</body>
</html>